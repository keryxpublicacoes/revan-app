<!-- ebook.html -->
<input type="hidden" name="type" value="ebook">
<input type="text" name="name" placeholder="Nome completo" required>
<input type="email" name="email" placeholder="E-mail" required>
<input type="text" name="whatsapp" placeholder="WhatsApp" required>
<input type="hidden" name="total" value="R$ 29,90">
<input type="file" name="receipt" accept="image/*" required>
<input type="submit" value="Enviar Comprovante">

<script>
  const form = document.getElementById('ebook-form');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    const file = formData.get('receipt');
    const reader = new FileReader();

    reader.onloadend = async () => {
      const base64 = reader.result.split(',')[1];
      const data = new URLSearchParams();
      data.append('name', formData.get('name'));
      data.append('email', formData.get('email'));
      data.append('whatsapp', formData.get('whatsapp'));
      data.append('total', 'R$ 29,90');
      data.append('receipt', base64);
      data.append('type', 'ebook');

      const res = await fetch('https://script.google.com/macros/s/AKfycbx_jVZf6hPHqg10xgfylug9z6_da-ECfaWy2SsaCYw3r5C4YC1Vqo01R8M7KhE3Wvv7/exec', {
        method: 'POST',
        body: data
      });

      const html = await res.text();
      document.body.innerHTML = html;
    };
    reader.readAsDataURL(file);
  });
</script>
